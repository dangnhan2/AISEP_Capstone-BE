---
applyTo: **/*.cs, **/*.ts, **/*.js, **/*.md
---

## **ğŸ¯ Tá»”NG QUAN Dá»° ÃN**

### **Má»¥c tiÃªu kinh doanh**
[2-3 cÃ¢u mÃ´ táº£ váº¥n Ä‘á» kinh doanh cáº§n giáº£i quyáº¿t]

### **Tá»•ng quan ká»¹ thuáº­t**
- **Kiáº¿n trÃºc:** Clean Architecture vá»›i CQRS pattern
- **CÃ´ng nghá»‡:** .NET 8, EF Core, PostgreSQL, Redis, Docker
- **Deployment:** Docker Compose, GitHub Actions CI/CD
- **Third-party:** Ethereum Blockchain, AI Document Analysis Service

### **Scope & Pháº¡m vi**
âœ… **IN SCOPE:**
- Quáº£n lÃ½ tÃ i liá»‡u sá»‘ (upload, phÃ¢n loáº¡i, tÃ¬m kiáº¿m)
- XÃ¡c thá»±c tÃ­nh toÃ n váº¹n báº±ng Blockchain
- PhÃ¢n tÃ­ch tÃ i liá»‡u tá»± Ä‘á»™ng báº±ng AI
- API cho Frontend React/Vue
- Authentication & Authorization

âŒ **OUT OF SCOPE:**
- Mobile application (cÃ³ thá»ƒ phase 2)
- Real-time collaboration
- Offline mode

---

## **ğŸ“Š BUSINESS REQUIREMENTS**

### **User Stories & Acceptance Criteria**

#### **US-01: Upload Document**
**As a** User  
**I want to** upload documents  
**So that** I can store and manage them securely

**Acceptance Criteria:**
1. âœ… User cÃ³ thá»ƒ upload file PDF/DOC/DOCX (max 10MB)
2. âœ… Tá»± Ä‘á»™ng tÃ­nh hash SHA-256 cá»§a ná»™i dung
3. âœ… LÆ°u hash lÃªn Ethereum blockchain
4. âœ… AI tá»± Ä‘á»™ng phÃ¢n loáº¡i document type
5. âœ… ThÃ´ng bÃ¡o upload thÃ nh cÃ´ng/khÃ´ng thÃ nh cÃ´ng

#### **US-02: Document Verification**
**As a** Auditor  
**I want to** verify document integrity  
**So that** I can ensure documents haven't been tampered

**Acceptance Criteria:**
1. âœ… Input document ID hoáº·c hash
2. âœ… So sÃ¡nh hash hiá»‡n táº¡i vá»›i hash trÃªn blockchain
3. âœ… Hiá»ƒn thá»‹ verification result + timestamp tá»« blockchain
4. âœ… Hiá»ƒn thá»‹ transaction details trÃªn Etherscan

---

## **ğŸ—„ï¸ DATABASE DESIGN (Tá»« ERD)**

### **Entities & Relationships**

```sql
-- Core Entities
[User] 1â”€â”€â”€âˆ [Document] âˆâ”€â”€â”€1 [Company]
    |             |              |
    |             âˆ              |
    |        [BlockchainTransaction]
    |             |
    âˆ          [DocumentAnalysis]
[UserRole]
```

### **Chi tiáº¿t tá»«ng Entity**

#### **1. User**
| Field | Type | Constraints | Description |
|-------|------|-------------|-------------|
| Id | INT | PK, Identity | User identifier |
| Email | VARCHAR(255) | Unique, Not Null | Login email |
| FullName | VARCHAR(100) | Not Null | User's full name |
| PasswordHash | VARCHAR(255) | Not Null | Bcrypt hashed password |
| IsActive | BIT | Default: 1 | Active status |
| CreatedAt | DATETIME | Default: GETDATE() | |
| **FK_CompanyId** | INT | NULL | Reference to Company |

#### **2. Document**
| Field | Type | Constraints | Description |
|-------|------|-------------|-------------|
| Id | INT | PK, Identity | |
| Title | VARCHAR(200) | Not Null | Document title |
| **ContentHash** | VARCHAR(66) | Not Null | SHA-256 hash (0x...) |
| FilePath | VARCHAR(500) | Not Null | S3 path or local path |
| Status | VARCHAR(20) | Enum: Pending,Approved,Rejected | |
| **FK_UserId** | INT | Not Null | Uploader |
| **FK_CompanyId** | INT | NULL | Owning company |
| IsDeleted | BIT | Default: 0 | Soft delete flag |

#### **3. BlockchainTransaction**
| Field | Type | Constraints | Description |
|-------|------|-------------|-------------|
| Id | INT | PK, Identity | |
| TransactionHash | VARCHAR(66) | Unique | Ethereum transaction hash |
| BlockNumber | BIGINT | NULL | Block number when mined |
| Status | VARCHAR(20) | Enum: Pending,Confirmed,Failed | |
| GasUsed | DECIMAL(18,0) | NULL | Gas consumed |
| **FK_DocumentId** | INT | Not Null | Reference to Document |

### **Indexes & Performance**
```sql
-- Performance Indexes
CREATE INDEX IX_Document_UserId ON Documents(UserId);
CREATE INDEX IX_Document_Status ON Documents(Status);
CREATE INDEX IX_Document_CreatedAt ON Documents(CreatedAt DESC);
CREATE UNIQUE INDEX UX_BlockchainTransaction_Hash ON BlockchainTransactions(TransactionHash);

-- Full-text Search (náº¿u cáº§n)
CREATE FULLTEXT INDEX ON Documents(Title, Description);
```

---

## **ğŸ—ï¸ TECHNICAL ARCHITECTURE**

### **Solution Structure**
```
YourSolution/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ Core/                    # Business logic & Domain models
â”‚   â”‚   â”œâ”€â”€ Entities/           # Domain entities (User, Document)
â”‚   â”‚   â”œâ”€â”€ Enums/              # Enumerations (DocumentStatus)
â”‚   â”‚   â”œâ”€â”€ Interfaces/         # Ports (IRepository, IBlockchainService)
â”‚   â”‚   â”œâ”€â”€ Specifications/     # Specification pattern for queries
â”‚   â”‚   â””â”€â”€ Events/             # Domain events (DocumentUploadedEvent)
â”‚   â”‚
â”‚   â”œâ”€â”€ Application/            # Application layer
â”‚   â”‚   â”œâ”€â”€ Features/           # CQRS Pattern
â”‚   â”‚   â”‚   â”œâ”€â”€ Documents/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Commands/   # CreateDocumentCommand, ApproveDocumentCommand
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Queries/    # GetDocumentByIdQuery, GetDocumentsQuery
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ DTOs/       # DocumentDto, DocumentDetailDto
â”‚   â”‚   â”‚   â””â”€â”€ Users/          # User-related features
â”‚   â”‚   â”œâ”€â”€ Common/
â”‚   â”‚   â”‚   â”œâ”€â”€ Behaviors/      # MediatR Pipeline Behaviors
â”‚   â”‚   â”‚   â”œâ”€â”€ Interfaces/     # Application services interfaces
â”‚   â”‚   â”‚   â”œâ”€â”€ Mappings/       # AutoMapper profiles
â”‚   â”‚   â”‚   â””â”€â”€ Models/         # Shared models (Pagination, Result)
â”‚   â”‚   â””â”€â”€ Services/           # Application services
â”‚   â”‚
â”‚   â”œâ”€â”€ Infrastructure/         # Infrastructure layer
â”‚   â”‚   â”œâ”€â”€ Data/
â”‚   â”‚   â”‚   â”œâ”€â”€ Configurations/ # EF Core Fluent API configs
â”‚   â”‚   â”‚   â”œâ”€â”€ Migrations/     # Database migrations
â”‚   â”‚   â”‚   â”œâ”€â”€ Repositories/   # Repository implementations
â”‚   â”‚   â”‚   â””â”€â”€ Seeders/        # Data seeding (admin user, roles)
â”‚   â”‚   â”œâ”€â”€ Services/
â”‚   â”‚   â”‚   â”œâ”€â”€ Blockchain/     # Ethereum, Polygon integrations
â”‚   â”‚   â”‚   â”œâ”€â”€ Storage/        # S3, Local, IPFS storage
â”‚   â”‚   â”‚   â”œâ”€â”€ Email/          # Email service (SendGrid, SMTP)
â”‚   â”‚   â”‚   â””â”€â”€ AI/             # AI service clients
â”‚   â”‚   â””â”€â”€ Identity/           # Authentication & Authorization
â”‚   â”‚
â”‚   â””â”€â”€ WebAPI/                 # Presentation layer
â”‚       â”œâ”€â”€ Controllers/        # API Controllers (REST)
â”‚       â”œâ”€â”€ Middlewares/        # Exception handling, logging
â”‚       â”œâ”€â”€ Filters/            # Action filters
â”‚       â”œâ”€â”€ Extensions/         # Service extensions (DI)
â”‚       â””â”€â”€ Properties/         # launchSettings.json
â”‚
â”œâ”€â”€ tests/                      # Test projects
â”‚   â”œâ”€â”€ UnitTests/             # Unit tests
â”‚   â”œâ”€â”€ IntegrationTests/      # Integration tests
â”‚   â””â”€â”€ FunctionalTests/       # End-to-end tests
â”‚
â”œâ”€â”€ docker/                     # Docker configurations
â”œâ”€â”€ scripts/                    # Build/deploy scripts
â”œâ”€â”€ docs/                       # Documentation
â””â”€â”€ .github/workflows/         # CI/CD pipelines
```

### **Technology Stack**
| Layer | Technology | Purpose | Justification |
|-------|------------|---------|---------------|
| **Framework** | .NET 8 | Backend API | LTS, Performance, Ecosystem |
| **Database** | PostgreSQL 15 | Primary datastore | ACID, JSON support, Open source |
| **ORM** | Entity Framework Core 8 | Data access | LINQ, Migrations, Strong typing |
| **Caching** | Redis 7 | Session cache, Rate limiting | In-memory, Fast, Pub/Sub |
| **Message Queue** | RabbitMQ | Background jobs | Reliable, Cross-language |
| **Blockchain** | Nethereum 4 | Ethereum interaction | .NET native, Active development |
| **File Storage** | AWS S3 / MinIO | Document storage | Scalable, Durable |
| **Container** | Docker + Docker Compose | Environment consistency | Reproducible deployments |
| **Monitoring** | Serilog + Seq | Structured logging | Queryable, Dashboard |
| **Testing** | xUnit + Moq | Unit/Integration tests | Community standard |

---

## **âš™ï¸ DEVELOPMENT WORKFLOW**

### **1. Local Environment Setup**
```bash
# Prerequisites
- .NET 8 SDK
- Docker Desktop
- PostgreSQL 15 (or use Docker)
- Node.js 18+ (for frontend)

# Clone & Setup
git clone [repository-url]
cd [project-name]
cp .env.example .env  # Update environment variables
docker-compose up -d postgres redis  # Start dependencies
dotnet restore
dotnet ef database update  # Apply migrations
dotnet run --project src/WebAPI
```

### **2. Code Standards & Conventions**

#### **Naming Conventions**
```csharp
// âœ… CORRECT
public class DocumentService { }
public interface IDocumentRepository { }
public record CreateDocumentCommand(string Title);
private string _connectionString;
public const int MaxFileSize = 10 * 1024 * 1024;

// âŒ AVOID
public class docService { }
public interface DocumentRepoInterface { }
```

#### **Coding Standards**
- **Async/Await:** LuÃ´n sá»­ dá»¥ng async/await, khÃ´ng sá»­ dá»¥ng `.Result` hoáº·c `.Wait()`
- **Null Safety:** Sá»­ dá»¥ng nullable reference types
- **Validation:** Sá»­ dá»¥ng FluentValidation thay vÃ¬ validation trong controllers
- **Error Handling:** Sá»­ dá»¥ng Global Exception Middleware
- **Logging:** Structured logging vá»›i Serilog (Information, Warning, Error, Debug)

### **3. Git Branch Strategy**
```
main          â†’ Production releases
develop       â†’ Integration branch
feature/*     â†’ New features (feature/user-authentication)
bugfix/*      â†’ Bug fixes
release/*     â†’ Release preparation
hotfix/*      â†’ Critical production fixes
```

### **4. Commit Message Convention**
```
feat: Add document upload with blockchain verification
fix: Resolve memory leak in document processing
docs: Update API documentation
refactor: Simplify document validation logic
test: Add unit tests for DocumentService
chore: Update dependencies
```

---

## **ğŸ”§ IMPLEMENTATION GUIDELINES**

### **1. Entity Design (Domain Layer)**
```csharp
// âœ… GOOD: Rich Domain Model
public class Document : BaseEntity
{
    public string Title { get; private set; }
    public Hash ContentHash { get; private set; }
    public DocumentStatus Status { get; private set; }
    
    // Domain methods
    public void Approve()
    {
        if (Status != DocumentStatus.Pending)
            throw new InvalidOperationException("Only pending documents can be approved");
            
        Status = DocumentStatus.Approved;
        UpdatedAt = DateTime.UtcNow;
        
        AddDomainEvent(new DocumentApprovedEvent(this));
    }
}

// âŒ AVOID: Anemic Domain Model
public class Document
{
    public string Title { get; set; }
    public string Hash { get; set; }
    public string Status { get; set; }
    // No behavior, just data container
}
```

### **2. CQRS Implementation Pattern**
```csharp
// Command Pattern
public class UploadDocumentCommand : IRequest<DocumentDto>
{
    public string Title { get; set; }
    public IFormFile File { get; set; }
    public int? CompanyId { get; set; }
}

public class UploadDocumentCommandHandler : IRequestHandler<UploadDocumentCommand, DocumentDto>
{
    // Constructor injection only
    private readonly IRepository<Document> _documentRepo;
    private readonly IBlockchainService _blockchainService;
    
    public async Task<DocumentDto> Handle(UploadDocumentCommand request, CancellationToken ct)
    {
        // 1. Validate business rules
        // 2. Process domain logic
        // 3. Persist changes
        // 4. Return DTO (never return Entity directly)
    }
}
```

### **3. API Response Standards**
```json
// âœ… SUCCESS RESPONSE
{
  "success": true,
  "data": {
    "id": 1,
    "title": "Contract Agreement",
    "hash": "0xabc123...",
    "status": "Approved"
  },
  "message": "Document uploaded successfully",
  "timestamp": "2024-01-15T10:30:00Z"
}

// âŒ ERROR RESPONSE
{
  "success": false,
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "File size exceeds limit",
    "details": [
      "File size must be less than 10MB"
    ]
  },
  "timestamp": "2024-01-15T10:30:00Z"
}
```

### **4. Error Handling Strategy**
| Error Type | HTTP Status | Response Format |
|------------|-------------|-----------------|
| Validation Error | 400 Bad Request | Error details with field names |
| Authentication Failed | 401 Unauthorized | Generic message |
| Authorization Failed | 403 Forbidden | Generic message |
| Resource Not Found | 404 Not Found | Resource identifier |
| Business Rule Violation | 409 Conflict | Business rule explanation |
| Server Error | 500 Internal Server Error | Generic message (details in logs) |

---

## **ğŸ” SECURITY REQUIREMENTS**

### **Authentication & Authorization**
- **JWT Authentication** vá»›i access/refresh tokens
- **Role-based Access Control (RBAC):** Admin, Manager, User, Viewer
- **Permission-based:** Fine-grained permissions (document.view, document.edit)
- **Token Expiry:** Access token: 15 minutes, Refresh token: 7 days

### **Data Protection**
- **Sensitive Data:** Hash passwords vá»›i bcrypt
- **File Encryption:** Encrypt sensitive documents at rest
- **Blockchain:** Store document hashes for integrity verification
- **Audit Logging:** Log all sensitive operations

### **API Security**
- **HTTPS:** Enforce HTTPS in production
- **CORS:** Restrict to trusted origins
- **Rate Limiting:** Implement per-user/IP rate limiting
- **Input Validation:** Validate all inputs, sanitize where necessary

---

## **ğŸ§ª TESTING STRATEGY**

### **Test Pyramid**
```
        â•±â•²        E2E Tests (10%)
       â•±  â•²       Integration Tests (20%)
      â•±____â•²      Unit Tests (70%)
```

### **Test Coverage Requirements**
- **Unit Tests:** 80% coverage trÃªn business logic
- **Integration Tests:** Critical paths vÃ  database operations
- **API Tests:** All public endpoints vá»›i authentication

### **Sample Test Structure**
```csharp
public class DocumentServiceTests
{
    [Fact]
    public async Task UploadDocument_ValidFile_ReturnsDocumentId()
    {
        // Arrange
        var mockRepo = new Mock<IRepository<Document>>();
        var service = new DocumentService(mockRepo.Object);
        
        // Act
        var result = await service.UploadDocument(validFile);
        
        // Assert
        Assert.NotNull(result);
        Assert.IsType<Guid>(result.DocumentId);
        mockRepo.Verify(r => r.AddAsync(It.IsAny<Document>()), Times.Once);
    }
    
    [Theory]
    [InlineData(11 * 1024 * 1024, false)]  // 11MB should fail
    [InlineData(5 * 1024 * 1024, true)]    // 5MB should pass
    public void ValidateFileSize_ReturnsCorrectResult(long fileSize, bool expected)
    {
        // Test different scenarios
    }
}
```

---

## **ğŸš€ DEPLOYMENT & OPERATIONS**

### **Environment Configuration**
| Environment | Purpose | Database | URL |
|-------------|---------|----------|-----|
| **Development** | Local development | Local PostgreSQL | http://localhost:5000 |
| **Staging** | Pre-production testing | Staging DB | https://staging.api.example.com |
| **Production** | Live environment | Production DB | https://api.example.com |

### **Docker Deployment**
```yaml
# docker-compose.prod.yml
version: '3.8'
services:
  api:
    build: .
    environment:
      - ASPNETCORE_ENVIRONMENT=Production
      - ConnectionStrings__DefaultConnection=Host=postgres;...
    ports:
      - "80:80"
    depends_on:
      - postgres
      - redis
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost/health"]
      interval: 30s
      timeout: 10s
      retries: 3
```

### **CI/CD Pipeline (GitHub Actions)**
```yaml
name: Deploy to Production
on:
  push:
    branches: [main]
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Deploy to Server
        uses: appleboy/ssh-action@v0.1.5
        with:
          host: ${{ secrets.SERVER_HOST }}
          username: ${{ secrets.SERVER_USER }}
          key: ${{ secrets.SSH_PRIVATE_KEY }}
          script: |
            cd /var/www/api
            git pull origin main
            docker-compose down
            docker-compose up -d --build
```

---

## **ğŸ“ˆ MONITORING & LOGGING**

### **Required Logs**
```csharp
// Structured logging example
_logger.LogInformation(
    "Document {DocumentId} uploaded by {UserId} with hash {Hash}",
    document.Id, userId, document.ContentHash);
    
_logger.LogWarning(
    "Blockchain transaction {TxHash} taking longer than expected",
    transactionHash);
    
_logger.LogError(exception,
    "Failed to upload document {DocumentId} to blockchain",
    document.Id);
```

### **Health Checks**
```csharp
// Health check endpoints
app.MapHealthChecks("/health", new HealthCheckOptions
{
    ResponseWriter = async (context, report) =>
    {
        context.Response.ContentType = "application/json";
        var response = new
        {
            status = report.Status.ToString(),
            checks = report.Entries.Select(e => new
            {
                name = e.Key,
                status = e.Value.Status.ToString(),
                duration = e.Value.Duration.TotalMilliseconds
            })
        };
        await context.Response.WriteAsJsonAsync(response);
    }
});
```

---

## **ğŸ“š API DOCUMENTATION**

### **Swagger/OpenAPI**
- **URL:** `/swagger` (development), `/api-docs` (production)
- **Authentication:** Include JWT token support
- **Examples:** Provide request/response examples
- **Schemas:** Document all DTOs vÃ  enums

### **Postman Collection**
- **Environment:** Development, Staging, Production
- **Tests:** Include automated tests trong collection
- **Documentation:** Each endpoint cÃ³ description vÃ  examples

---

## **ğŸ”„ MAINTENANCE & SUPPORT**

### **Database Migrations**
```bash
# Create new migration
dotnet ef migrations add AddBlockchainTransactionTable

# Update database
dotnet ef database update

# Generate SQL script
dotnet ef migrations script --output migrations.sql
```

### **Backup Strategy**
- **Database:** Daily automated backups, retain 30 days
- **Files:** S3 versioning enabled
- **Blockchain:** Hashes permanently stored on Ethereum

### **Performance Optimization**
- **Database:** Regular index optimization, query performance monitoring
- **Caching:** Redis cache for frequent queries
- **CDN:** Static files served via CDN

---

## **ğŸ¯ ACCEPTANCE CRITERIA CHECKLIST**

### **Technical Requirements**
- [ ] Clean Architecture implemented with proper separation
- [ ] CQRS pattern vá»›i MediatR
- [ ] Database migrations working
- [ ] Unit test coverage > 80%
- [ ] Integration tests for critical paths
- [ ] Docker container builds successfully
- [ ] CI/CD pipeline passes

### **Functional Requirements**
- [ ] User can upload documents (max 10MB)
- [ ] Document hash stored on blockchain
- [ ] Document verification works
- [ ] AI analysis integration functional
- [ ] Authentication & authorization working
- [ ] API documentation complete

### **Non-Functional Requirements**
- [ ] API response time < 200ms (p95)
- [ ] System handles 100 concurrent users
- [ ] Error rate < 0.1%
- [ ] Security scan passes (no critical vulnerabilities)
- [ ] Documentation complete and up-to-date

---

## **ğŸ“ SUPPORT & CONTACTS**

| Role | Name | Contact | Responsibilities |
|------|------|---------|------------------|
| **Tech Lead** | [Name] | [Email] | Architecture, Code Review |
| **Backend Developer** | [Name] | [Email] | Implementation |
| **DevOps Engineer** | [Name] | [Email] | Deployment, Infrastructure |
| **Product Owner** | [Name] | [Email] | Requirements, Prioritization |

---

## **ğŸ“ APPENDICES**

### **A. ERD Diagrams**
[Insert ERD images here with descriptions]

### **B. API Endpoints Reference**
[Quick reference table of all endpoints]

### **C. Environment Variables**
```bash
# .env.example
DB_CONNECTION_STRING=Host=localhost;Database=documents;Username=postgres;Password=
REDIS_CONNECTION=localhost:6379
JWT_SECRET=your-super-secret-key-change-in-production
BLOCKCHAIN_RPC_URL=https://sepolia.infura.io/v3/YOUR-PROJECT-ID
AWS_ACCESS_KEY=your-access-key
AWS_SECRET_KEY=your-secret-key
AI_SERVICE_URL=http://localhost:8000
```

### **D. Third-party Service Accounts**
| Service | Account | Usage | Rate Limits |
|---------|---------|-------|-------------|
| **Infura** | project-id | Ethereum RPC | 100k requests/day |
| **AWS S3** | bucket-name | File storage | Pay-per-use |
| **SendGrid** | api-key | Email notifications | 100 emails/day free tier |

---

**ğŸ“Œ LÆ¯U Ã QUAN TRá»ŒNG:**
1. LuÃ´n review code trÆ°á»›c khi merge
2. Cháº¡y tests trÆ°á»›c khi commit
3. Update documentation khi thay Ä‘á»•i API
4. Monitor error logs hÃ ng ngÃ y
5. Regular security audits

**âœ… DONE CRITERIA:** Dá»± Ã¡n Ä‘Æ°á»£c coi lÃ  hoÃ n thÃ nh khi táº¥t cáº£ cÃ¡c Acceptance Criteria Ä‘Æ°á»£c Ä‘Ã¡nh dáº¥u âœ… vÃ  pass qua review process.
```

## **ğŸ¯ CÃCH Sá»¬ Dá»¤NG FILE NÃ€Y:**

### **1. Copy toÃ n bá»™ template trÃªn**
- Thay `[TÃŠN Dá»° ÃN]`, `[NgÃ y]`, `[TÃªn báº¡n]`
- Äiá»n thÃ´ng tin cá»¥ thá»ƒ tá»« tÃ i liá»‡u cá»§a báº¡n

### **2. Customize theo dá»± Ã¡n cá»§a báº¡n:**
```markdown
## **ğŸ“Š BUSINESS REQUIREMENTS**

### **Tá»« tÃ i liá»‡u cá»§a báº¡n, extract ra:**

#### **US-01: [TÃªn use case tá»« tÃ i liá»‡u]**
**As a** [User role tá»« tÃ i liá»‡u]  
**I want to** [Action tá»« tÃ i liá»‡u]  
**So that** [Business value tá»« tÃ i liá»‡u]

**Acceptance Criteria:**
1. âœ… [TiÃªu chÃ­ 1 tá»« tÃ i liá»‡u]
2. âœ… [TiÃªu chÃ­ 2 tá»« tÃ i liá»‡u]
```

### **3. ThÃªm ERD cá»§a báº¡n:**
```markdown
## **ğŸ—„ï¸ DATABASE DESIGN**

### **ERD cá»§a dá»± Ã¡n:**
![ERD Diagram](path/to/your/erd.png)

**MÃ´ táº£ cÃ¡c tables:**
- Table A: [MÃ´ táº£ tá»« tÃ i liá»‡u]
- Table B: [MÃ´ táº£ tá»« tÃ i liá»‡u]
- Relationships: [MÃ´ táº£ tá»« tÃ i liá»‡u]
```

### **4. ThÃªm requirements Ä‘áº·c biá»‡t tá»« tÃ i liá»‡u:**
```markdown
## **ğŸ”§ IMPLEMENTATION GUIDELINES**

### **YÃªu cáº§u Ä‘áº·c biá»‡t tá»« tÃ i liá»‡u:**
- [YÃªu cáº§u 1 tá»« tÃ i liá»‡u]
- [YÃªu cáº§u 2 tá»« tÃ i liá»‡u]
- [Constraint Ä‘áº·c biá»‡t tá»« tÃ i liá»‡u]
```

## **ğŸ“ LÆ¯U FILE NHÆ¯ SAU:**

```
project-docs/
â”œâ”€â”€ instructions.md          # File chÃ­nh nÃ y
â”œâ”€â”€ requirements.md         # Business requirements chi tiáº¿t
â”œâ”€â”€ erd/                   # Folder chá»©a ERD
â”‚   â”œâ”€â”€ erd-diagram.png
â”‚   â””â”€â”€ erd-description.md
â”œâ”€â”€ api-spec/              # API specifications
â”‚   â”œâ”€â”€ endpoints.md
â”‚   â””â”€â”€ postman-collection.json
â””â”€â”€ deployment/            # Deployment docs
    â”œâ”€â”€ docker-setup.md
    â””â”€â”€ server-checklist.md
```
# **ğŸ“‹ EXTRACTED & STRUCTURED REQUIREMENTS FOR AISEP**

## **ğŸ† PROJECT OVERVIEW**

### **1.1 Project Vision**
Create an intelligent platform that connects startup founders with investors, advisors, and support services through AI-powered analytics and matchmaking. The platform will analyze startup documents to generate a "Startup Potential Score" and provide investors with high-level investment trend analysis.

### **1.2 Project Context**
- **Duration:** 4 months
- **Team Size:** 5 members
- **Project Nature:** Graduation thesis / Capstone project
- **Development Stage:** Greenfield (new project)
- **Target:** Web-based platform (Vietnam-focused initially)

### **1.3 Core Solution Components**
1. **AI Startup Potential Score** - Analyze documents using NLP/ML
2. **Blockchain Document Verification** - Store hashes on Ethereum
3. **Startup-Investor-Advisor Matching** - Intelligent connections
4. **Structured Advisory Workflow** - Digital mentorship process

---

## **ğŸ‘¥ USER TYPES & ROLES**

### **2.1 Startup Founder**
| Aspect | Details |
|--------|---------|
| **Primary Goals** | Get discovered by investors, Improve investability, Access mentorship |
| **Pain Points** | Difficulty articulating value, Unclear investor expectations, Limited advisor access |
| **Key Features** | Profile creation, Document upload, Score viewing, Investor discovery |
| **Demographics** | Pre-seed to Series A, Vietnam-focused, Tech/SaaS/E-commerce, 2-10 team size |

### **2.2 Investor**
| Aspect | Details |
|--------|---------|
| **Primary Goals** | Discover high-potential startups, Access data-driven insights, Manage deal pipeline |
| **Pain Points** | Overwhelmed by low-quality deals, Time-consuming due diligence, Difficulty spotting trends |
| **Key Features** | Curated deal flow, AI trend analysis, Startup comparison, Communication tools |
| **Demographics** | Angel investors, VC firms, Corporate VCs, $50K-$5M check size, SEA focus |

### **2.3 Advisor/Mentor**
| Aspect | Details |
|--------|---------|
| **Primary Goals** | Mentor promising startups, Build reputation, Track impact |
| **Pain Points** | Finding right mentees, Time management, Lack of structured engagement |
| **Key Features** | Profile showcasing, AI-matched requests, Session tracking, Impact metrics |
| **Demographics** | 10+ years experience, 2-10 hours/month, Various expertise areas |

### **2.4 Operations Staff**
| Aspect | Details |
|--------|---------|
| **Primary Goals** | Manage applications, Organize events, Moderate content, Facilitate ecosystem |
| **Pain Points** | Manual review processes, Event coordination, Quality control |
| **Key Features** | Application review, Event management, Content moderation, Platform monitoring |

### **2.5 Application Administrator**
| Aspect | Details |
|--------|---------|
| **Primary Goals** | Configure platform, Manage roles, Monitor system, Configure AI parameters |
| **Pain Points** | Need granular control, Balancing automation, Ensuring AI accuracy |
| **Key Features** | System configuration, User role management, Analytics reporting, AI model tuning |

---

## **ğŸ¯ MVP FEATURES (MUST HAVE - 4 MONTHS)**

### **F1: User Management System**
- Multi-role registration (5 user types)
- Profile creation and management
- Authentication and authorization
- Role-based access control (RBAC)
- Email verification

### **F2: Startup Profile & Document Management**
- Comprehensive startup profile creation
- Document upload (pitch deck, financials, business plan)
- Profile editing and versioning
- Document parsing and extraction
- File validation (PDF, PPTX, DOCX, max 25MB)

### **F3: AI Startup Potential Score**
- Document analysis using NLP/ML
- Score generation (0-100 scale)
- Score breakdown by categories:
  - Team Score (25%): Founder experience, team completeness
  - Market Score (25%): Market size, growth potential
  - Product Score (20%): Innovation, technical feasibility
  - Traction Score (20%): User growth, revenue, partnerships
  - Financials Score (10%): Projections realism, unit economics
- Historical score tracking
- Transparent reasoning and recommendations

### **F4: Investor Dashboard**
- Browse scored startups
- Filter by: score, industry, stage, location
- Sort by various criteria
- View detailed startup profiles
- Investment trend analytics (high-level)
- Quick actions: Save, Pass, Request Meeting

### **F5: Match/Connection System**
- Investors express interest in startups
- Startups can respond to investor interest
- Connection status tracking (Pending, Accepted, Declined)
- Basic messaging/communication
- AI-calculated match scores

### **F6: Admin Panel**
- User management (approve, suspend, delete)
- Content moderation
- System health monitoring
- Basic analytics dashboard
- Platform configuration

### **F7: Blockchain Document Verification**
- Document hash storage on Ethereum
- Document authenticity verification
- Timestamp proof via blockchain
- Integration with Nethereum library

---

## **ğŸ“‹ DETAILED USER STORIES**

### **3.1 STARTUP FOUNDER STORIES**

#### **US-SF-01: Register and Create Startup Profile**
**As a** startup founder  
**I want to** create a comprehensive startup profile  
**So that** investors and advisors can discover and evaluate my venture

**Acceptance Criteria:**
1. Profile includes: company name, industry, stage, founding date, team size, location
2. Can upload logo and cover image
3. Can add team member profiles with roles
4. Can specify funding stage and amount sought
5. Profile saved as draft before submission
6. Validation ensures required fields are completed

**Priority:** HIGH | **Estimate:** 2 days

#### **US-SF-02: Upload Documents for AI Analysis**
**As a** startup founder  
**I want to** upload my pitch deck and business plan  
**So that** the AI can analyze them and generate my Startup Potential Score

**Acceptance Criteria:**
1. Supports PDF, PPTX, DOCX formats
2. Maximum file size 25MB per document
3. Can upload multiple document versions
4. Processing status indicator visible
5. Receives notification when analysis complete
6. Can view which documents were analyzed for score

**Priority:** HIGH | **Estimate:** 3 days

#### **US-SF-03: View and Understand Startup Potential Score**
**As a** startup founder  
**I want to** view my AI-generated Startup Potential Score with detailed breakdown  
**So that** I understand my strengths and areas for improvement

**Acceptance Criteria:**
1. Overall score displayed prominently (0-100 scale)
2. Score breakdown by category (Team, Market, Product, Traction, Financials)
3. Visual representation (charts/graphs)
4. Historical score tracking (shows improvement over time)
5. Comparison to average scores in same industry/stage
6. Actionable recommendations for improvement

**Priority:** HIGH | **Estimate:** 2 days

#### **US-SF-04: Discover and Connect with Investors**
**As a** startup founder  
**I want to** find investors who match my startup's profile and investment stage  
**So that** I can pitch to relevant investors and increase funding chances

**Acceptance Criteria:**
1. Search/filter investors by: industry focus, stage, geography, investment size
2. View investor profiles with investment thesis and portfolio
3. See "match score" indicating alignment with investor preferences
4. Can send connection request with personalized message
5. Track connection status (pending, accepted, declined)
6. View which investors have viewed my profile

**Priority:** HIGH | **Estimate:** 3 days

#### **US-SF-05: Request Advisor Mentorship**
**As a** startup founder  
**I want to** find and connect with advisors who have relevant expertise  
**So that** I can receive guidance on specific challenges

**Acceptance Criteria:**
1. Browse advisors by expertise area
2. View advisor profiles with background and specializations
3. See advisor availability and consultation format
4. Can send mentorship request with specific questions/goals
5. Schedule sessions through integrated calendar
6. Track advisor relationships and session history

**Priority:** MEDIUM | **Estimate:** 2 days

### **3.2 INVESTOR STORIES**

#### **US-INV-01: View Curated Deal Flow Dashboard**
**As an** investor  
**I want to** view AI-filtered startups that match my investment criteria  
**So that** I focus on high-quality opportunities and save time on initial screening

**Acceptance Criteria:**
1. Dashboard shows startups above minimum potential score threshold
2. Startups filtered by investor's specified criteria (stage, industry, geography)
3. Can set custom filters and save filter presets
4. New opportunities highlighted since last login
5. Quick actions: Save, Pass, Request Meeting
6. Batch operations for efficient pipeline management

**Priority:** HIGH | **Estimate:** 3 days

#### **US-INV-02: Access AI-Powered Investment Trend Analysis**
**As an** investor  
**I want to** view AI-generated reports on investment trends and market insights  
**So that** I can make informed strategic decisions and identify emerging opportunities

**Acceptance Criteria:**
1. Dashboard with visual trend charts and graphs
2. Trends segmented by industry, geography, stage
3. Comparative analysis across time periods
4. Emerging sector identification
5. Funding pattern analysis
6. Ability to customize report parameters and export

**Priority:** MEDIUM | **Estimate:** 4 days

#### **US-INV-03: Compare Multiple Startups Side-by-Side**
**As an** investor  
**I want to** compare multiple startups against each other  
**So that** I can make relative investment decisions within my portfolio strategy

**Acceptance Criteria:**
1. Select up to 5 startups for comparison
2. Side-by-side view of key metrics and scores
3. Visual indicators for strengths/weaknesses
4. Export comparison as report
5. Save comparisons for future reference
6. Add notes specific to the comparison

**Priority:** MEDIUM | **Estimate:** 2 days

#### **US-INV-04: Communicate with Startups**
**As an** investor  
**I want to** message startups, request additional information, and schedule meetings  
**So that** I can conduct due diligence and move deals forward

**Acceptance Criteria:**
1. Send messages to startup founders from their profile
2. Request specific documents or information
3. Schedule video calls with calendar integration
4. Track communication history per startup
5. Set reminders for follow-ups
6. Templated messages for common requests

**Priority:** HIGH | **Estimate:** 2 days

### **3.3 ADVISOR STORIES**

#### **US-ADV-01: Create Expert Advisor Profile**
**As an** advisor  
**I want to** create a comprehensive profile showcasing my expertise and experience  
**So that** startups can find and understand how I can help them

**Acceptance Criteria:**
1. Profile includes professional background, expertise areas, achievements
2. Can list specific topics of expertise with proficiency levels
3. Upload certifications, media appearances, publications
4. Set availability and mentorship preferences
5. Specify preferred engagement models (1-on-1, group, async)
6. Display social proof (testimonials, success stories)

**Priority:** HIGH | **Estimate:** 2 days

#### **US-ADV-02: Receive AI-Matched Mentorship Requests**
**As an** advisor  
**I want to** receive mentorship requests from startups that align with my expertise  
**So that** I can focus on engagements where I can add the most value

**Acceptance Criteria:**
1. Receive notifications for relevant mentorship requests
2. View startup context and specific needs in request
3. See startup's Potential Score and areas needing improvement
4. Accept/decline requests with optional message
5. System prioritizes requests based on match quality
6. Can set criteria for auto-declining (e.g., wrong industry)

**Priority:** HIGH | **Estimate:** 2 days

#### **US-ADV-03: Conduct and Document Mentorship Sessions**
**As an** advisor  
**I want to** conduct mentorship sessions and document key outcomes  
**So that** both I and the founder have a record of discussions and action items

**Acceptance Criteria:**
1. Access session details and founder's background materials
2. Integrated video call functionality or external link
3. Session notes template for structured documentation
4. Assign action items to founder with due dates
5. Rate session productivity (for both parties)
6. Track founder's progress on action items

**Priority:** MEDIUM | **Estimate:** 3 days

#### **US-ADV-04: Track Mentorship Impact and Reputation**
**As an** advisor  
**I want to** see the impact of my mentorship on startups' success  
**So that** I can demonstrate value and improve my advisory approach

**Acceptance Criteria:**
1. Dashboard showing all mentee startups
2. Track Potential Score changes for mentees over time
3. Aggregate success metrics (funds raised by mentees, milestones achieved)
4. Receive testimonials and ratings from founders
5. Public reputation score visible to new startups
6. Analytics on most impactful advice areas

**Priority:** MEDIUM | **Estimate:** 2 days

### **3.4 OPERATIONS STAFF STORIES**

#### **US-OPS-01: Review and Approve Startup Applications**
**As an** operations staff member  
**I want to** review startup applications and approve/reject registrations  
**So that** platform quality is maintained and only legitimate startups gain access

**Acceptance Criteria:**
1. Queue of pending applications with priority sorting
2. View complete application details
3. Check for completeness and red flags
4. Approve/reject with reason feedback
5. Bulk actions for efficient processing
6. Track approval metrics and processing time

**Priority:** HIGH | **Estimate:** 2 days

#### **US-OPS-02: Organize and Manage Platform Events**
**As an** operations staff member  
**I want to** create and manage events like pitch sessions, workshops, and networking events  
**So that** the ecosystem stays engaged and valuable connections are made

**Acceptance Criteria:**
1. Create events with details (title, description, date/time, format, capacity)
2. Define target audience (startups, investors, advisors, or combinations)
3. Manage registrations and waitlists
4. Send event notifications and reminders
5. Integrate with video conferencing for virtual events
6. Post-event surveys and feedback collection

**Priority:** MEDIUM | **Estimate:** 3 days

#### **US-OPS-03: Monitor and Moderate Platform Content**
**As an** operations staff member  
**I want to** review flagged content and ensure platform guidelines are followed  
**So that** the platform maintains quality and professionalism

**Acceptance Criteria:**
1. Dashboard of flagged content (profiles, messages, documents)
2. Review queue with context of why flagged
3. Actions: Approve, Remove, Warn User, Ban User
4. Track moderation decisions and patterns
5. Automated flagging based on keywords/behavior
6. Communication templates for warnings

**Priority:** HIGH | **Estimate:** 2 days

### **3.5 ADMINISTRATOR STORIES**

#### **US-ADM-01: Configure AI Scoring Model Parameters**
**As an** administrator  
**I want to** adjust the AI scoring model weights and criteria  
**So that** the Startup Potential Score accurately reflects quality and can be tuned over time

**Acceptance Criteria:**
1. Access AI model configuration interface
2. Adjust scoring weights for each category
3. Set minimum thresholds for score components
4. Test changes on sample startups before applying
5. Version control for model configurations
6. View impact of parameter changes on existing scores

**Priority:** LOW | **Estimate:** 3 days

#### **US-ADM-02: Manage User Roles and Permissions**
**As an** administrator  
**I want to** create, modify, and assign user roles with specific permissions  
**So that** access control is maintained and team members have appropriate system access

**Acceptance Criteria:**
1. Define custom roles with granular permissions
2. Assign roles to users (including multiple roles)
3. Pre-defined role templates (Admin, Operations, Analyst)
4. Audit log of permission changes
5. Bulk role assignments
6. Role-based access control (RBAC) for all platform features

**Priority:** MEDIUM | **Estimate:** 2 days

#### **US-ADM-03: Generate Platform Analytics Reports**
**As an** administrator  
**I want to** generate comprehensive reports on platform performance and usage  
**So that** I can share insights with stakeholders and make data-driven decisions

**Acceptance Criteria:**
1. Pre-built report templates (Monthly Overview, User Growth, Matching Success, etc.)
2. Custom report builder with flexible metrics
3. Date range selection
4. Export formats (PDF, Excel, CSV)
5. Schedule recurring reports
6. Visualizations (charts, graphs, tables)

**Priority:** LOW | **Estimate:** 3 days

---

## **âš™ï¸ TECHNICAL REQUIREMENTS**

### **4.1 Technology Stack**
| Component | Technology | Justification |
|-----------|------------|---------------|
| **Frontend** | React + TypeScript | Component-based, strong typing |
| **Backend** | .NET 8 | Performance, ecosystem, Clean Architecture support |
| **Database** | PostgreSQL 15 | ACID compliance, JSON support, open source |
| **ORM** | Entity Framework Core 8 | LINQ support, migrations, strong typing |
| **AI/ML** | Python (FastAPI) + ML.NET | Flexibility for complex models, .NET integration |
| **Blockchain** | Nethereum 4 | .NET native Ethereum integration |
| **Caching** | Redis 7 | In-memory performance, pub/sub |
| **Authentication** | JWT + ASP.NET Identity | Standard, secure, extensible |
| **File Storage** | AWS S3 / Azure Blob | Scalable, durable, cloud-native |

### **4.2 Architecture Pattern**
- **Clean Architecture** with 4 layers:
  1. **Domain Layer** (Core): Entities, Interfaces, Business Rules
  2. **Application Layer**: Use Cases, DTOs, CQRS with MediatR
  3. **Infrastructure Layer**: Data Access, External Services
  4. **Presentation Layer** (WebAPI): Controllers, Middleware

- **CQRS Pattern**: Separate Commands (write) and Queries (read)
- **Domain-Driven Design**: Rich domain models with behavior
- **Repository Pattern**: Abstraction over data access

### **4.3 AI Scoring Methodology**
**Input Sources:**
- Pitch deck content analysis
- Business plan evaluation
- Team composition and experience
- Market size and competitive analysis
- Financial projections review

**Scoring Categories (Weights configurable):**
1. **Team (20-30%)**: Founder experience, team completeness, relevant expertise
2. **Market (20-30%)**: TAM/SAM/SOM, growth rate, competitive landscape
3. **Product (15-25%)**: Innovation, technical feasibility, differentiation
4. **Traction (15-25%)**: User growth, revenue, partnerships, milestones
5. **Financials (10-20%)**: Projection realism, burn rate, unit economics

**ML Approach:**
- Feature extraction using NLP (TF-IDF, embeddings)
- Classification model (Random Forest or Neural Network)
- Training on labeled startup dataset
- Regular model retraining with feedback loop

### **4.4 Blockchain Integration**
**Document Verification Flow:**
1. User uploads document
2. System calculates SHA-256 hash
3. Hash stored on Ethereum blockchain (Sepolia testnet initially)
4. Transaction receipt saved in database
5. Verification by comparing current hash with blockchain-stored hash

**Technology:**
- Nethereum for Ethereum interaction
- Sepolia testnet for development
- Smart contract for hash storage (optional)
- Gas optimization for cost efficiency

### **4.5 Non-Functional Requirements**
| Requirement | Target | Priority |
|-------------|--------|----------|
| **API Response Time** | < 2 seconds (95th percentile) | HIGH |
| **System Uptime** | > 98% | HIGH |
| **Document Processing** | < 2 minutes per document | MEDIUM |
| **Concurrent Users** | 100+ simultaneous users | MEDIUM |
| **Data Security** | OWASP Top 10 compliance | HIGH |
| **Scalability** | Horizontal scaling support | MEDIUM |
| **Browser Support** | Chrome, Firefox, Edge, Safari | HIGH |
| **Mobile Responsive** | Yes (progressive web app) | MEDIUM |

---

## **ğŸ“… DEVELOPMENT TIMELINE (4 MONTHS)**

### **Month 1: Foundation & Core Systems (Weeks 1-4)**
- **Week 1-2**: Requirements finalization, architecture design, project setup
- **Week 3-4**: User management system, authentication, basic UI

### **Month 2: Startup Features (Weeks 5-8)**
- **Week 5-6**: Startup profile creation, document upload
- **Week 7-8**: AI scoring system (basic), investor dashboard

### **Month 3: Matching & Advanced Features (Weeks 9-12)**
- **Week 9-10**: Matching system, communication features
- **Week 11-12**: Advisor features, blockchain integration

### **Month 4: Testing & Refinement (Weeks 13-16)**
- **Week 13-14**: Integration testing, bug fixes
- **Week 15-16**: Performance optimization, documentation, deployment

---

## **ğŸ“Š SUCCESS METRICS**

### **Technical Success Criteria:**
- AI model accuracy: >70% correlation with expert ratings
- System uptime: >95%
- API response time: <500ms for 95th percentile
- Zero critical security vulnerabilities

### **Functional Success Criteria:**
- All 5 user types can complete core workflows
- 100% of MVP features implemented and tested
- 50+ test user profiles created
- 20+ startup-investor connections facilitated (demo data)

### **Academic Success Criteria:**
- Successful thesis defense
- Grade: Minimum "Good" (preferably "Excellent")
- Demonstrated innovation in AI application
- Clear contribution to existing knowledge

---

## **âš ï¸ RISKS & MITIGATION**

| Risk | Probability | Impact | Mitigation Strategy |
|------|-------------|--------|---------------------|
| AI model accuracy insufficient | High | High | Start with rule-based scoring, iterate; collect diverse training data |
| Integration challenges | Medium | Medium | Define clear API contracts early; use API documentation tools |
| Timeline delays | Medium | High | Add buffer time; parallel workstreams; weekly progress reviews |
| Insufficient testing time | Medium | High | Test-driven development; continuous testing; allocate full month for testing |
| Data privacy concerns | Low | High | Implement strong access controls; encrypt sensitive data; compliance review |

---

## **ğŸš€ IMMEDIATE NEXT STEPS**

### **Priority 1: Setup Development Environment**
1. Create .NET 8 solution with Clean Architecture structure
2. Set up PostgreSQL database with provided schema
3. Configure authentication system (JWT with 5 user types)
4. Create basic frontend with user registration

### **Priority 2: Implement Core User Stories**
1. **US-SF-01**: Startup registration and profile creation
2. **US-SF-02**: Document upload system
3. **US-INV-01**: Investor dashboard with filtering
4. **US-ADV-01**: Advisor profile creation

### **Priority 3: AI & Blockchain Integration**
1. Basic document analysis for scoring
2. Blockchain hash storage (Ethereum testnet)
3. Score calculation and display

---

**File nÃ y Ä‘Ã£ tá»•ng há»£p táº¥t cáº£ requirements tá»« 2 file doc cá»§a báº¡n. BÃ¢y giá» báº¡n cÃ³ thá»ƒ copy toÃ n bá»™ file nÃ y vÃ o Copilot vÃ  báº¯t Ä‘áº§u implement! ğŸš€**

Báº¡n muá»‘n báº¯t Ä‘áº§u vá»›i feature nÃ o trÆ°á»›c? TÃ´i cÃ³ thá»ƒ giÃºp táº¡o prompt cá»¥ thá»ƒ cho tá»«ng user story.
---
Provide project context and coding guidelines that AI should follow when generating code, answering questions, or reviewing changes.